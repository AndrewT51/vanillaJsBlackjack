"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e){function n(){var n=document.getElementsByClassName("animCard")[0],s=document.createElement("div");s.classList.add("card"),s.classList.add("animCard"),s.classList.add("facedown"),o.insertBefore(s,o.firstChild),setTimeout(function(){setTimeout(function(){i.forEach(function(e){return n.style[e]="rotate(-45deg) translateX("+d+"%) translateY("+a+"%)"}),setTimeout(function(){e?(l.lastChild.style.visibility="visible",C.style.visibility=A?O?"hidden":"visible":"hidden",h.textContent=O?"?":p):(c.lastChild.style.visibility="visible",T.style.visibility=M?"visible":"hidden",v.textContent=E,21>=E&&t(!1)),o.removeChild(n)},1e3)},700);for(var s=0;s<i.length;s++)i.forEach(function(e){return n.style[e]="rotate(90deg) translateX(80%)"})},300)}var i=["webkitTransform","mozTransform","oTransform","msTransform","transform"],o=document.getElementsByClassName("cardStart")[0],d=(document.getElementsByTagName("button")[0],e?I+=51:w+=51),a=e?Y:k;n()}function t(e){f.disabled=e,m.disabled=e}function n(){setTimeout(function(){M=A=!1,T.style.visibility="hidden",C.style.visibility="hidden",y[0].style.visibility="hidden",c.innerHTML="",l.innerHTML="",v.textContent="0",h.textContent="0"},s?0:1500),g=a(d()),t(!1),s||(r=S,u[0].removeChild(u[0].children[1]),u[0].removeChild(u[0].children[1]),u[0].appendChild(r)),r.addEventListener("click",i)}function i(){O=!0,w=I=-875,k=329,Y=73,B=[],x=[],L=N=!1,E=p=0,H(),setTimeout(function(){P(),setTimeout(function(){H(),setTimeout(function(){P("facedown"),setTimeout(function(){u[0].appendChild(f).textContent="Stick",u[0].appendChild(m).textContent="Hit"},2e3)},1500)},1500)},1500),S=r.cloneNode(!0),r.parentNode.removeChild(r)}function o(){l.childNodes[1].classList.remove("facedown"),O=!1,C.style.visibility=A?"visible":"hidden",h.textContent=p}var d=function(){var e=["♥","♦","♠","♣"],t=["K","Q","J","A"],n=[];return e.forEach(function(e){t.forEach(function(t){n.push("["+(t+e)+"]"+("A"===t?11:10))});for(var i=2;10>=i;i++)n.push("["+(i+e)+"]"+i)}),n},a=function(e){for(var t=e.splice(~~(e.length/2)),n=t.concat(e),i=[];n.length;)i.push(n.splice(Math.random()*n.length,1)[0]);return i},s=!0,c=document.getElementById("p1Position"),l=document.getElementById("dealerPosition"),u=document.getElementsByClassName("container"),r=document.getElementsByTagName("button")[0],m=document.createElement("button"),f=document.createElement("button"),v=document.getElementById("yourTotalVal"),h=document.getElementById("dealerTotalVal"),y=document.getElementsByClassName("overlay"),b=document.getElementById("textBox"),C=document.getElementById("dealerSoft"),T=document.getElementById("playerSoft"),g=void 0,E=void 0,p=void 0,B=void 0,x=void 0,L=void 0,N=void 0,w=void 0,k=void 0,I=void 0,Y=void 0,A=void 0,M=void 0,O=void 0,S=void 0;n(),f.addEventListener("click",function(){L=!0,t(!0),setTimeout(function(){o(),D()},800)}),m.addEventListener("click",function(){t(!0),H()});var H=function(){e(!1);var t=V(x);c.appendChild(t.card),E+=Number(t.value),E>21&&(E=z(x,E))},P=function(t){e(!0);var n=V(B);t&&n.card.classList.add(t),setTimeout(function(){l.appendChild(n.card)},2e3),setTimeout(function(){p+=Number(n.value),p>21&&(p=z(B,p))},1500)},V=function(e){var t=document.createElement("div");t.classList.add("card");var n=g.shift(),i=n.match(/\[(.+)\]/)[1];t.textContent=i,i.indexOf("♠")+i.indexOf("♣")===-2&&t.classList.add("red");var o=Number(n.match(/\](\d+)/)[1]);return 0===i.indexOf("A")&&(e.push("A"),X()),{card:t,value:o}},X=function(){A=B.length?!0:!1,M=x.length?!0:!1},z=function(e,t){return e.length&&(e.pop(),t-=10),e.length&&(e.pop(),t-=10),X(),t>21&&setTimeout(function(){J()},3e3),t},D=function Q(){setTimeout(function(){17>p?(P(),Q()):21>=p&&(N=!0,L&&setTimeout(function(){J()}))},1500)},J=function(){var e;switch(t(!0),!0){case p>21:e="You won, dealer went bust";break;case E>21:e="You lost, you went bust";break;case p>E:e="You lost";break;case E>p:e="You won";break;case E===p:e="That was a draw"}setTimeout(function(){K(e)},1e3)},K=function(e){y[0].style.visibility="visible",b.textContent=e,s=!1,n()}});